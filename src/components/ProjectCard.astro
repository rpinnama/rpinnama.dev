---
import type { CollectionEntry } from "astro:content";
import Datetime from "./Datetime.astro";
import { slugifyStr } from "@/utils/slugify";
import { Image } from "astro:assets";

// Import the sample project thumbnail directly
import sampleThumbnail from "@/assets/images/sample-project-thumbnail.png";

type Props = CollectionEntry<"projects">;

const { data, id } = Astro.props;
const { title, description, pubDatetime, modDatetime, timezone, thumbnail } = data;

const href = `/projects/${id}/`;

// Determine if this is the sample project
const isSampleProject = id === "sample-project";
---

<li class="my-6">
  <a
    href={href}
    class="group flex flex-col overflow-hidden rounded-lg border border-muted bg-card shadow-sm transition-all duration-200 hover:shadow-md"
  >
    <div class="aspect-video w-full overflow-hidden">
      {isSampleProject ? (
        <Image
          src={sampleThumbnail}
          alt={`Thumbnail for ${title}`}
          class="h-full w-full object-cover transition-transform duration-200 group-hover:scale-105"
          loading="lazy"
        />
      ) : thumbnail && (
        <img
          src={thumbnail}
          alt={`Thumbnail for ${title}`}
          class="h-full w-full object-cover transition-transform duration-200 group-hover:scale-105"
          loading="lazy"
        />
      )}
    </div>
    <div class="flex flex-grow flex-col gap-2 p-4">
      <h3
        transition:name={slugifyStr(title)}
        class="text-xl font-medium text-accent decoration-dashed underline-offset-4 group-hover:underline"
      >
        {title}
      </h3>
      <Datetime {pubDatetime} {modDatetime} {timezone} />
      <p class="line-clamp-3 text-sm">{description}</p>
    </div>
  </a>
</li>
